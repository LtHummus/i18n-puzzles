package main

import (
	"testing"

	"github.com/stretchr/testify/assert"
)

func TestStripMarkers(t *testing.T) {
	assert.Equal(t, "73 + (3 * (1 * (((3 + (6 - 2)) * 6) + ((52 * 6) / (13 - (7 - 2))))))", stripMarkers("73 + (3 * (1 * ⁧(((3 + (6 - 2)) * 6) + ⁦((52 * 6) / ⁧(13 - (7 - 2))⁩)⁩)⁩))"))
	assert.Equal(t, "(1 * (((66 / 2) - 15) - 4)) * (1 + (1 + 1))", stripMarkers("⁧(1 * ((⁦(66 / 2)⁩ - 15) - 4)) * (1 + (1 + 1))⁩"))
	assert.Equal(t, "(8 / ((1 * 3) + 1)) * 130", stripMarkers("⁧(8 / (⁦(1 * 3)⁩ + 1)) * 130⁩"))
	assert.Equal(t, "47 * ((3 + 1) * ((40 * (24 - 8)) / ((72 / 6) - ((2 * 1) + 2))))", stripMarkers("47 * ((3 + 1) * (⁧(40 * (24 - 8))⁩ / (⁧(72 / 6)⁩ - ⁧(⁦(2 * 1)⁩ + 2)⁩)))"))
	assert.Equal(t, "90 * (((810 / ((3 + 5) + 1)) + ((169 - 79) / 2)) - (93 - 28))", stripMarkers("90 * ⁧(((810 / (⁦(3 + 5)⁩ + 1)) + ((169 - 79) / 2)) - ⁦(93 - 28)⁩)⁩"))
	assert.Equal(t, "92 * ((92 / ((54 / 3) / (5 + 4))) - (2 * (64 / 8)))", stripMarkers("92 * (⁧(92 / ((54 / 3) / (5 + 4)))⁩ - ⁧(2 * (64 / 8))⁩)"))
}

func TestFixReversedString(t *testing.T) {
	assert.Equal(t, "47 * ((3 + 1) * (((8 - 24) * 40) / ((6 / 72) - (2 + (2 * 1)))))", fixReversedString("47 * ((3 + 1) * (⁧(40 * (24 - 8))⁩ / (⁧(72 / 6)⁩ - ⁧(⁦(2 * 1)⁩ + 2)⁩)))"))
	assert.Equal(t, "90 * ((93 - 28) - ((2 / (79 - 169)) + ((1 + (3 + 5)) / 810)))", fixReversedString("90 * ⁧(((810 / (⁦(3 + 5)⁩ + 1)) + ((169 - 79) / 2)) - ⁦(93 - 28)⁩)⁩"))
	assert.Equal(t, "92 * ((((4 + 5) / (3 / 54)) / 92) - ((8 / 64) * 2))", fixReversedString("92 * (⁧(92 / ((54 / 3) / (5 + 4)))⁩ - ⁧(2 * (64 / 8))⁩)"))
	assert.Equal(t, "73 + (3 * (1 * (((52 * 6) / ((2 - 7) - 13)) + (6 * ((2 - 6) + 3)))))", fixReversedString("73 + (3 * (1 * ⁧(((3 + (6 - 2)) * 6) + ⁦((52 * 6) / ⁧(13 - (7 - 2))⁩)⁩)⁩))"))
	assert.Equal(t, "((1 + 1) + 1) * ((4 - (15 - (66 / 2))) * 1)", fixReversedString("⁧(1 * ((⁦(66 / 2)⁩ - 15) - 4)) * (1 + (1 + 1))⁩"))
	assert.Equal(t, "130 * ((1 + (1 * 3)) / 8)", fixReversedString("⁧(8 / (⁦(1 * 3)⁩ + 1)) * 130⁩"))
}
